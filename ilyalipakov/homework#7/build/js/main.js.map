{"version":3,"sources":["index.js"],"names":["maxId","page","cardsElems","document","querySelector","form","addEventListener","e","preventDefault","_e$target$elements","target","elements","firstname","lastname","email","avatar","console","log","firstnameValue","value","lastnameValue","emailValue","avatarValue","createNewUser","then","ok","id","card","createCardForUser","first_name","last_name","prepend","classList","contains","parrent","parentNode","deleteUser","remove","err","body","offsetHeight","window","scrollY","innerHeight","getDataUsers","createElem","tag","clazz","text","elem","createElement","add","innerText","fetch","concat","response","json","result","total_pages","users","data","i","length","appendChild","method","headers","Content-Type","_ref","user","cardInfo","cardEmail","cardFirstName","cardLastname","cardAvatar","deleteCard","loadImg","imgElem","link","alt","setAttribute"],"mappings":"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","file":"main.js","sourcesContent":["\"use strict\";\n\nvar page = 1;\nvar maxId;\nvar cardsElems = document.querySelector('.cards');\nvar form = document.querySelector('.form'); // EVENTS\n\nform.addEventListener('submit', function (e) {\n  e.preventDefault();\n  var _e$target$elements = e.target.elements,\n      firstname = _e$target$elements.firstname,\n      lastname = _e$target$elements.lastname,\n      email = _e$target$elements.email,\n      avatar = _e$target$elements.avatar;\n  console.log(firstname);\n  var firstnameValue = firstname.value;\n  var lastnameValue = lastname.value;\n  var emailValue = email.value;\n  var avatarValue = avatar.value;\n  createNewUser({\n    firstnameValue: firstnameValue,\n    lastnameValue: lastnameValue,\n    emailValue: emailValue,\n    avatarValue: avatarValue\n  }).then(function (ok) {\n    if (ok) {\n      var id = maxId++;\n      var card = createCardForUser({\n        id: id,\n        first_name: firstnameValue,\n        last_name: lastnameValue,\n        email: emailValue,\n        avatar: avatarValue\n      });\n      cardsElems.prepend(card);\n    }\n  });\n});\ncardsElems.addEventListener('click', function (e) {\n  var target = e.target;\n\n  if (target.classList.contains('card__delete')) {\n    var parrent = target.parentNode;\n    var id = parrent.id;\n    deleteUser(id).then(function (ok) {\n      if (ok) {\n        parrent.remove();\n      }\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }\n});\ndocument.addEventListener('scroll', function () {\n  var distToBottom = document.body.offsetHeight - window.scrollY - window.innerHeight;\n\n  if (distToBottom < 100) {\n    getDataUsers(++page);\n  }\n});\n\nvar createElem = function createElem(tag, clazz, text) {\n  var elem = document.createElement(tag);\n  elem.classList.add(clazz);\n\n  if (text) {\n    elem.innerText = text;\n  }\n\n  return elem;\n}; // NETWORK\n\n\nvar getDataUsers = function getDataUsers(page) {\n  fetch(\"https://reqres.in/api/users?page=\".concat(page)).then(function (response) {\n    return response.json();\n  }).then(function (result) {\n    if (page <= result.total_pages) {\n      var users = result.data;\n\n      for (var i = 0; i < users.length; i++) {\n        cardsElems.appendChild(createCardForUser(users[i]));\n      }\n    }\n  })[\"catch\"](function (err) {\n    console.log(err);\n  });\n};\n\nvar deleteUser = function deleteUser(id) {\n  return fetch(\"https://reqres.in/api/users/\".concat(id), {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }).then(function (response) {\n    return response.ok;\n  });\n};\n\nfunction createNewUser(_ref) {\n  var id = _ref.id,\n      first_name = _ref.first_name,\n      last_name = _ref.last_name,\n      email = _ref.email,\n      avatar = _ref.avatar;\n  return fetch(\"https://reqres.in/api/users\", {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    data: {\n      id: id,\n      first_name: first_name,\n      last_name: last_name,\n      email: email,\n      avatar: avatar\n    }\n  }).then(function (response) {\n    return response.ok;\n  });\n} // ELEMENTS\n\n\nvar createCardForUser = function createCardForUser(user) {\n  var card = createElem('div', 'card');\n  card.id = user.id;\n  maxId = ++user.id;\n  var cardInfo = createElem('div', 'card__info');\n  var cardEmail = createElem('p', 'card__email', user.email);\n  var cardFirstName = createElem('p', 'card__firstname', user.first_name);\n  var cardLastname = createElem('p', 'card__lastname', user.last_name);\n  var cardAvatar = createElem('img', 'card__avata');\n  var deleteCard = createElem('div', 'card__delete', 'Удалить');\n  loadImg(cardAvatar, 'card__avatar', user.avatar, \"\".concat(user.first_name, \" \").concat(user.last_name));\n  card.appendChild(cardInfo);\n  card.appendChild(deleteCard);\n  cardInfo.appendChild(cardEmail);\n  cardInfo.appendChild(cardFirstName);\n  cardInfo.appendChild(cardLastname);\n  cardInfo.appendChild(cardAvatar);\n  return card;\n};\n\nvar loadImg = function loadImg(imgElem, clazz, link, alt) {\n  imgElem.setAttribute('src', link);\n  imgElem.setAttribute('alt', alt);\n  imgElem.classList.add(clazz);\n};\n\ngetDataUsers(page);"]}